{
    "hosting": {
        "public": "server/build",
        "ignore": [
            "firebase.json",
            "**/.*"
        ],
        "redirects": [
            {
                "source": "/images/:path*",
                "destination": "/esm-bundled/images/:path*",
                "type": 301
            },
            {
                "source": "/browserconfig.xml",
                "destination": "/esm-bundled/browserconfig.xml",
                "type": 301
            },
            {
                "source": "/crossdomain.xml",
                "destination": "/esm-bundled/crossdomain.xml",
                "type": 301
            },
            {
                "source": "/favicon.ico",
                "destination": "/esm-bundled/images/favicon.ico",
                "type": 301
            },
            {
                "source": "/manifest.webmanifest",
                "destination": "/esm-bundled/manifest.webmanifest",
                "type": 301
            }
        ],
        "rewrites": [
            {
                "source": "/api/talkies/dialogflow",
                "function": "DialogflowHandler"
            },
            {
                "source": "/api/talkies/raw",
                "function": "TalkieAPIHandler"
            },
            {
                "source": "/api/inbound-email",
                "function": "EmailReceiveHandler"
            },
            {
                "source": "/api/inbound-email-authorize",
                "function": "EmailSPFHandler"
            },
            {
                "source": "/service-worker.js",
                "destination": "/esm-bundled/service-worker.js"
            },
            {
                "source": "/firebase-messaging-sw.js",
                "destination": "/esm-bundled/firebase-messaging-sw.js"
            },
            {
                "source": "!(/images/**|/es?-bundled/**|/favicon.ico|/browserconfig.xml|/crossdomain.xml|/manifest.webmanifest)",
                "function": "PrplHandler"
            }
        ],
        "headers": [
            {
                "source" : "**/service-worker.js",
                "headers" : [
                    {
                        "key" : "Service-Worker-Allowed",
                        "value" : "/"
                    },
                    {
                        "key": "Cache-Control",
                        "value": "no-cache"
                    }
                ]
            },
            {
                "source" : "**/firebase-messaging-sw.js",
                "headers" : [
                    {
                        "key" : "Service-Worker-Allowed",
                        "value" : "/"
                    },
                    {
                        "key": "Cache-Control",
                        "value": "no-cache"
                    }
                ]
            },
            {
                "source": "**/*.js",
                "headers": [
                    {
                        "key": "x-content-type-options",
                        "value": "nosniff"
                    },
                    {
                        "key": "Content-type",
                        "value": "text/javascript; charset=utf-8"
                    }
                ]
            },
            {
                "source": "**/*.css",
                "headers": [
                    {
                        "key": "x-content-type-options",
                        "value": "nosniff"
                    }
                ]
            },
            {
                "source": "**/*.ico",
                "headers": [
                    {
                        "key": "Content-type",
                        "value": "image/x-icon"
                    }
                ]
            }
        ]
    }
}